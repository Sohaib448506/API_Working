{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useContext } from 'react';\nimport { CancelToken } from 'apisauce';\nimport apiBook from '../api/apiBook';\nimport { AppContext } from '../context/AppContext';\nexport default function useCreateBook(book) {\n  _s();\n\n  const {\n    user,\n    setAlert\n  } = useContext(AppContext);\n  useEffect(() => {\n    let response;\n    const source = CancelToken.source();\n\n    if (book !== null && book !== void 0 && book.title) {\n      (async () => {\n        response = await apiBook.post(user === null || user === void 0 ? void 0 : user.token, book, source.token);\n\n        if (response) {\n          setAlert({\n            'msg': `Book: ${book.title} Created`,\n            cat: 'success'\n          });\n        } else if (response === false && response !== undefined) {\n          setAlert({\n            'msg': `Please reauthorize you account`,\n            cat: 'warning'\n          });\n        }\n      })();\n    }\n\n    return () => {\n      source.cancel();\n    };\n  }, [book, user.token]);\n}\n\n_s(useCreateBook, \"quW7mNcqjTdTSxSIfXvz4zpzPvY=\");","map":{"version":3,"names":["useEffect","useContext","CancelToken","apiBook","AppContext","useCreateBook","book","user","setAlert","response","source","title","post","token","cat","undefined","cancel"],"sources":["/home/sohaib/Desktop/Practice/bookStore/API Work/src/hooks/useCreateBook.js"],"sourcesContent":["import {useEffect, useContext} from 'react'\nimport {CancelToken} from 'apisauce'\nimport apiBook from '../api/apiBook'\nimport { AppContext } from '../context/AppContext'\n\n\nexport default function useCreateBook(book) {\n    const {user, setAlert} = useContext(AppContext)\n\n    useEffect(\n        ()=>{\n            let response\n            const source = CancelToken.source()\n            if (book?.title){\n                (async()=>{\n                    response = await apiBook.post(user?.token, book, source.token)\n                    if (response){\n                        setAlert({'msg':`Book: ${book.title} Created`, cat:'success'})\n                    }else if(response === false && response !== undefined){\n                        setAlert({'msg':`Please reauthorize you account`, cat:'warning'})\n                    }\n                })()\n            }\n            return ()=>{source.cancel()}\n        },[book, user.token]\n    )\n}\n"],"mappings":";;AAAA,SAAQA,SAAR,EAAmBC,UAAnB,QAAoC,OAApC;AACA,SAAQC,WAAR,QAA0B,UAA1B;AACA,OAAOC,OAAP,MAAoB,gBAApB;AACA,SAASC,UAAT,QAA2B,uBAA3B;AAGA,eAAe,SAASC,aAAT,CAAuBC,IAAvB,EAA6B;EAAA;;EACxC,MAAM;IAACC,IAAD;IAAOC;EAAP,IAAmBP,UAAU,CAACG,UAAD,CAAnC;EAEAJ,SAAS,CACL,MAAI;IACA,IAAIS,QAAJ;IACA,MAAMC,MAAM,GAAGR,WAAW,CAACQ,MAAZ,EAAf;;IACA,IAAIJ,IAAJ,aAAIA,IAAJ,eAAIA,IAAI,CAAEK,KAAV,EAAgB;MACZ,CAAC,YAAS;QACNF,QAAQ,GAAG,MAAMN,OAAO,CAACS,IAAR,CAAaL,IAAb,aAAaA,IAAb,uBAAaA,IAAI,CAAEM,KAAnB,EAA0BP,IAA1B,EAAgCI,MAAM,CAACG,KAAvC,CAAjB;;QACA,IAAIJ,QAAJ,EAAa;UACTD,QAAQ,CAAC;YAAC,OAAO,SAAQF,IAAI,CAACK,KAAM,UAA3B;YAAsCG,GAAG,EAAC;UAA1C,CAAD,CAAR;QACH,CAFD,MAEM,IAAGL,QAAQ,KAAK,KAAb,IAAsBA,QAAQ,KAAKM,SAAtC,EAAgD;UAClDP,QAAQ,CAAC;YAAC,OAAO,gCAAR;YAAyCM,GAAG,EAAC;UAA7C,CAAD,CAAR;QACH;MACJ,CAPD;IAQH;;IACD,OAAO,MAAI;MAACJ,MAAM,CAACM,MAAP;IAAgB,CAA5B;EACH,CAfI,EAeH,CAACV,IAAD,EAAOC,IAAI,CAACM,KAAZ,CAfG,CAAT;AAiBH;;GApBuBR,a"},"metadata":{},"sourceType":"module"}